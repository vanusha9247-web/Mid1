<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Mission</title>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #010409;
            font-family: 'Inter', 'Segoe UI', sans-serif; color: white;
        }

        /* Layered Cosmic Background */
        #canvas-container {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at bottom, #041124 0%, #010409 100%);
        }

        #aurora-canvas {
            position: absolute; inset: 0;
            filter: blur(18px); /* Real gas effect */
        }

        #star-canvas {
            position: absolute; inset: 0;
        }

        #wrapper {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; height: 100vh;
        }

        /* Entry Overlay */
        #overlay {
            position: fixed; inset: 0; background: #010409;
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .start-btn {
            background: transparent; color: #10b981; border: 1px solid #10b981;
            padding: 18px 36px; font-size: 0.9rem; letter-spacing: 5px;
            cursor: pointer; transition: 0.4s; font-weight: bold;
            border-radius: 4px;
        }
        .start-btn:hover { background: #10b981; color: #010409; box-shadow: 0 0 40px rgba(16, 185, 129, 0.4); }

        /* HUD Timer */
        #timer-container {
            position: fixed; top: 30px; right: 30px; text-align: right; z-index: 100;
        }
        #timer { font-size: 3.5rem; font-weight: 800; color: #00e5ff; margin: 0; text-shadow: 0 0 20px rgba(0,229,255,0.4); }

        /* Floating Message Card */
        .vibe-msg {
            position: fixed; cursor: pointer; padding: 22px 32px;
            background: rgba(255, 255, 255, 0.04); 
            backdrop-filter: blur(15px);
            border-radius: 15px; border: 1px solid rgba(255,255,255,0.15);
            font-size: 1.15rem; text-align: center; color: white;
            z-index: 50; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-width: 260px;
            animation: floatAndGlow 15s linear forwards;
            line-height: 1.4;
        }

        @keyframes floatAndGlow {
            0% { transform: translate(var(--startX), 110vh); opacity: 0; }
            10% { opacity: 1; border-color: rgba(16, 185, 129, 0.5); }
            90% { opacity: 1; }
            100% { transform: translate(var(--endX), -25vh); opacity: 0; }
        }

        .particle {
            position: absolute; pointer-events: none; border-radius: 50%;
            z-index: 200; animation: burst 1.1s cubic-bezier(0, 0.9, 0.3, 1) forwards;
        }
        @keyframes burst {
            to { transform: translate(var(--x), var(--y)) scale(0); opacity: 0; }
        }

        #final-screen {
            display: none; max-width: 500px; padding: 40px;
            background: rgba(0,0,0,0.8); border: 1px solid rgba(251, 191, 36, 0.4);
            backdrop-filter: blur(25px); border-radius: 20px; text-align: center; z-index: 500;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <button class="start-btn" onclick="startSurprise()">INITIATE MISSION</button>
    </div>

    <div id="canvas-container">
        <canvas id="star-canvas"></canvas>
        <canvas id="aurora-canvas"></canvas>
    </div>

    <div id="wrapper">
        <div id="timer-container">
            <div id="timer">02:00</div>
        </div>

        <div id="final-screen">
            <h1 style="color:#fbbf24; font-size: 2.5rem; margin-top: 0;">Happy Birthday ‚ù§Ô∏è</h1>
            <p id="final-text" style="line-height: 1.8; font-size: 1.1rem; color: #cbd5e1;"></p>
            <div style="font-size: 5rem; cursor: pointer; margin-top: 20px;" onclick="createBurst(event.clientX, event.clientY, 200)">ü•Ç</div>
        </div>
    </div>

    <audio id="music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <script>
        const aCanvas = document.getElementById('aurora-canvas');
        const sCanvas = document.getElementById('star-canvas');
        const aCtx = aCanvas.getContext('2d');
        const sCtx = sCanvas.getContext('2d');

        const lines = [
            "Are you a Wi-Fi signal? Because I‚Äôm feeling a strong connection.",
            "I was going to wait three days to text‚Ä¶ but I‚Äôm bad at waiting when I like someone.",
            "Do you believe in fate, or should I accidentally bump into you again?",
            "Are you made of copper and tellurium? Because you‚Äôre Cu-Te.",
            "I‚Äôm not good at math, but you + me feels right.",
            "Is your name Google? Because you‚Äôve got everything I‚Äôm searching for.",
            "Are you this attractive on purpose, or is it just effortless?",
            "I was fine before I saw you‚Ä¶ now I‚Äôm distracted.",
            "Quick question‚Äîhow are you single?",
            "I saw you and thought, ‚ÄòI need to know your story.‚Äô",
            "You look like trouble‚Ä¶ the kind I‚Äôm willing to risk.",
            "Are you a parking ticket? Because you‚Äôve got ‚Äòfine‚Äô written all over you.",
            "Do you have a Band-Aid? I just scraped my knee falling for you."
        ];

        let timeLeft = 120;
        let lineIdx = 0;
        let waveHeight = 100;
        let time = 0;
        let stars = [];

        // --- Starfield Logic ---
        function initStars() {
            sCanvas.width = window.innerWidth;
            sCanvas.height = window.innerHeight;
            stars = [];
            for (let i = 0; i < 200; i++) {
                stars.push({
                    x: Math.random() * sCanvas.width,
                    y: Math.random() * sCanvas.height,
                    size: Math.random() * 1.5,
                    opacity: Math.random(),
                    speed: Math.random() * 0.05
                });
            }
        }

        function drawStars() {
            sCtx.clearRect(0, 0, sCanvas.width, sCanvas.height);
            stars.forEach(s => {
                sCtx.fillStyle = `rgba(255, 255, 255, ${Math.abs(Math.sin(s.opacity))})`;
                sCtx.beginPath();
                sCtx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                sCtx.fill();
                s.opacity += 0.01;
                s.y -= s.speed;
                if (s.y < 0) s.y = sCanvas.height;
            });
            requestAnimationFrame(drawStars);
        }

        // --- Aurora Logic ---
        function drawAurora() {
            aCanvas.width = window.innerWidth;
            aCanvas.height = window.innerHeight;
            aCtx.clearRect(0, 0, aCanvas.width, aCanvas.height);

            const colors = ['#00e5ff22', '#10b98133', '#7c3aed15'];
            for (let i = 0; i < 3; i++) {
                aCtx.beginPath();
                aCtx.strokeStyle = colors[i];
                aCtx.lineWidth = 200;
                aCtx.moveTo(-50, aCanvas.height * 0.5);

                for (let x = 0; x < aCanvas.width + 100; x += 25) {
                    const y = aCanvas.height * 0.45 + 
                              Math.sin(x * 0.002 + time + i) * waveHeight + 
                              Math.cos(x * 0.001 + time) * (waveHeight / 2);
                    aCtx.lineTo(x, y);
                }
                aCtx.stroke();
            }
            time += 0.006;
            requestAnimationFrame(drawAurora);
        }

        function surgeAurora() {
            waveHeight = 220;
            let surgeDown = setInterval(() => {
                if (waveHeight > 100) waveHeight -= 1.5;
                else clearInterval(surgeDown);
            }, 30);
        }

        function startSurprise() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('music').play();
            spawnMessage();
            
            setInterval(() => {
                if(timeLeft > 3) {
                    spawnMessage();
                    surgeAurora();
                }
            }, 4000); 

            const clock = setInterval(() => {
                timeLeft--;
                if(timeLeft >= 0) {
                    let m = Math.floor(timeLeft/60);
                    let s = timeLeft % 60;
                    document.getElementById('timer').textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                } else {
                    clearInterval(clock);
                    showFinal();
                }
            }, 1000);
        }

        function spawnMessage() {
            const m = document.createElement('div');
            m.className = 'vibe-msg';
            m.textContent = lines[lineIdx];
            
            const startX = Math.random() * (window.innerWidth - 280);
            const endX = startX + (Math.random() - 0.5) * 150;
            m.style.setProperty('--startX', startX + 'px');
            m.style.setProperty('--endX', endX + 'px');

            m.onclick = (e) => {
                createBurst(e.clientX, e.clientY, 100);
                m.style.opacity = '0';
                setTimeout(() => m.remove(), 400);
            };

            document.body.appendChild(m);
            lineIdx = (lineIdx + 1) % lines.length;
        }

        function createBurst(x, y, count) {
            const pColors = ['#00e5ff','#10b981','#fbbf24','#ffffff','#a78bfa'];
            for(let i=0; i<count; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                const size = Math.random() * 4 + 2;
                p.style.width = size + 'px'; p.style.height = size + 'px';
                p.style.left = x + 'px'; p.style.top = y + 'px';
                p.style.background = pColors[Math.floor(Math.random()*5)];
                const tx = (Math.random() - 0.5) * 600;
                const ty = (Math.random() - 0.5) * 600;
                p.style.setProperty('--x', tx + 'px');
                p.style.setProperty('--y', ty + 'px');
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1100);
            }
        }

        function showFinal() {
            document.getElementById('timer-container').style.display = 'none';
            document.querySelectorAll('.vibe-msg').forEach(el => el.remove());
            const f = document.getElementById('final-screen');
            f.style.display = 'block';
            waveHeight = 280; 
            document.getElementById('final-text').innerText = `I hope this year gives you everything you‚Äôve been wishing for‚Ä¶\nand if not, I‚Äôm here to make up the difference.\n\nYou are not just another year in my life,\nyou‚Äôre the reason my days feel warmer\nand my future feels brighter.\n\nIf love is a wish,\nyou‚Äôre the one I‚Äôd make\nevery single time.\n\nToday is about you,\nbut my heart chooses you\nevery day.`;
        }

        window.onresize = initStars;
        initStars();
        drawStars();
        drawAurora();
    </script>
</body>
</html>
