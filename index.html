<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Mission</title>
    <style>
        :root {
            --aurora-1: #00e5ff;
            --aurora-2: #10b981;
            --aurora-3: #7c3aed;
            --gold: #fbbf24;
        }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background: #010409;
            font-family: 'Inter', 'Segoe UI', sans-serif; color: #f8fafc;
            user-select: none; -webkit-user-select: none;
        }

        #aurora-canvas {
            position: fixed; top: 0; left: 0; z-index: -1;
            filter: blur(10px);
        }

        #wrapper {
            position: relative; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
        }

        #timer-container {
            position: absolute;
            transition: all 1.5s cubic-bezier(0.23, 1, 0.32, 1);
            z-index: 100; text-align: center;
        }
        #timer {
            font-size: clamp(4rem, 15vw, 8rem); font-weight: 900;
            text-shadow: 0 0 40px rgba(0, 229, 255, 0.5);
            margin: 0; font-variant-numeric: tabular-nums;
        }
        .timer-mini {
            top: 25px; right: 25px; transform: scale(0.35);
            transform-origin: top right; opacity: 0.8;
        }

        .floating-text {
            position: fixed; cursor: pointer;
            font-size: clamp(1.1rem, 3.5vw, 1.6rem); font-weight: 400;
            text-shadow: 0 0 20px rgba(255,255,255,0.7);
            white-space: normal; text-align: center;
            padding: 20px 30px; z-index: 50;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px); border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            animation: floatUp 12s linear forwards;
            color: #fff; max-width: 300px;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.8); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-30vh) scale(1.1); opacity: 0; }
        }

        .particle {
            position: absolute; pointer-events: none; border-radius: 2px;
            z-index: 60; animation: explode 1.2s cubic-bezier(0.1, 0.9, 0.2, 1) forwards;
        }
        @keyframes explode {
            to { transform: translate(var(--tx), var(--ty)) rotate(var(--tr)) scale(0); opacity: 0; }
        }

        #overlay {
            position: fixed; inset: 0; background: #010409;
            display: flex; justify-content: center; align-items: center; z-index: 2000;
        }
        .start-btn {
            background: transparent; color: var(--aurora-2);
            border: 2px solid var(--aurora-2); padding: 15px 40px;
            letter-spacing: 4px; cursor: pointer; font-weight: 900;
            transition: 0.3s;
        }
        .start-btn:hover { background: var(--aurora-2); color: #000; }

        #final-screen {
            display: none; text-align: center; max-width: 550px; padding: 40px;
            background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(30px);
            border: 1px solid rgba(255,255,255,0.15); border-radius: 24px;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <canvas id="aurora-canvas"></canvas>
    
    <div id="overlay">
        <button class="start-btn" onclick="startExperience()">INITIATE MISSION</button>
    </div>

    <div id="wrapper">
        <div id="timer-container">
            <div id="timer">02:00</div>
        </div>

        <div id="final-screen">
            <h1 style="color:var(--gold); font-size: 3rem; margin-top:0;">Happy Birthday ‚ù§Ô∏è</h1>
            <p id="final-text" style="line-height: 2; color: #cbd5e1; font-size: 1.1rem;"></p>
            <div style="font-size: 5rem; cursor: pointer; filter: drop-shadow(0 0 10px var(--gold));" onclick="burstFinal(event)">ü•Ç</div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById('aurora-canvas');
        const ctx = canvas.getContext('2d');
        let timeLeft = 120;
        let lineIndex = 0;
        let auroraSpeed = 0.005;

        const lines = [
            "Are you a Wi-Fi signal? Because I‚Äôm feeling a strong connection.",
            "I was going to wait three days to text‚Ä¶ but I‚Äôm bad at waiting when I like someone.",
            "Do you believe in fate, or should I accidentally bump into you again?",
            "Are you made of copper and tellurium? Because you‚Äôre Cu-Te.",
            "I‚Äôm not good at math, but you + me feels right.",
            "Is your name Google? Because you‚Äôve got everything I‚Äôm searching for.",
            "Are you this attractive on purpose, or is it just effortless?",
            "I was fine before I saw you‚Ä¶ now I‚Äôm distracted.",
            "Quick question‚Äîhow are you single?",
            "I saw you and thought, ‚ÄòI need to know your story.‚Äô",
            "You look like trouble‚Ä¶ the kind I‚Äôm willing to risk.",
            "Are you a parking ticket? Because you‚Äôve got ‚Äòfine‚Äô written all over you.",
            "Do you have a Band-Aid? I just scraped my knee falling for you."
        ];

        let time = 0;
        function drawAurora() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const w = canvas.width;
            const h = canvas.height;

            ctx.fillStyle = '#010409';
            ctx.fillRect(0,0,w,h);

            for (let i = 0; i < 4; i++) {
                ctx.beginPath();
                const gradient = ctx.createLinearGradient(0, 0, w, h);
                gradient.addColorStop(0, 'transparent');
                gradient.addColorStop(0.5, [ '#00e5ff33', '#10b98133', '#7c3aed22', '#10b98111' ][i]);
                gradient.addColorStop(1, 'transparent');
                
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 200;
                ctx.moveTo(-100, h * 0.5);

                for (let x = 0; x < w + 200; x += 30) {
                    const y = h * 0.5 + Math.sin(x * 0.001 + time + i) * 180 + Math.cos(x * 0.003 + time) * 120;
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            time += auroraSpeed;
            requestAnimationFrame(drawAurora);
        }

        function startExperience() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('bgMusic').play();
            
            setTimeout(() => {
                document.getElementById('timer-container').classList.add('timer-mini');
                startPopups();
            }, 3000);

            const countdown = setInterval(() => {
                timeLeft--;
                if(timeLeft >= 0) {
                    let m = Math.floor(timeLeft/60);
                    let s = timeLeft % 60;
                    document.getElementById('timer').textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                } else {
                    clearInterval(countdown);
                    showFinal();
                }
            }, 1000);
        }

        function createFloatingText() {
            const txt = document.createElement('div');
            txt.className = 'floating-text';
            txt.textContent = lines[lineIndex];
            
            const padding = 50;
            const randomX = Math.random() * (window.innerWidth - 350) + padding;
            txt.style.left = randomX + 'px';

            txt.onclick = (e) => {
                // Pulse aurora on tap
                auroraSpeed = 0.05;
                setTimeout(() => auroraSpeed = 0.005, 1500);

                createExplosion(e.clientX, e.clientY, 120); 
                txt.style.opacity = '0';
                setTimeout(() => txt.remove(), 200);
            };

            document.body.appendChild(txt);
            lineIndex = (lineIndex + 1) % lines.length;
        }

        function createExplosion(x, y, count) {
            const colors = ['#00e5ff', '#10b981', '#fbbf24', '#ffffff', '#7c3aed'];
            for(let i=0; i<count; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                const size = Math.random() * 6 + 2;
                p.style.width = size + 'px'; p.style.height = size + 'px';
                p.style.background = colors[Math.floor(Math.random()*colors.length)];
                p.style.left = x + 'px'; p.style.top = y + 'px';
                
                const tx = (Math.random() - 0.5) * 800; 
                const ty = (Math.random() - 0.5) * 800;
                const tr = Math.random() * 720;
                p.style.setProperty('--tx', tx + 'px');
                p.style.setProperty('--ty', ty + 'px');
                p.style.setProperty('--tr', tr + 'deg');
                
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1200);
            }
        }

        function startPopups() {
            setInterval(() => { if(timeLeft > 2) createFloatingText(); }, 4000);
        }

        function showFinal() {
            document.getElementById('timer-container').style.display = 'none';
            document.querySelectorAll('.floating-text').forEach(e => e.remove());
            const f = document.getElementById('final-screen');
            f.style.display = 'block';
            auroraSpeed = 0.02; // Faster flow for the finale
            document.getElementById('final-text').textContent = `I hope this year gives you everything you‚Äôve been wishing for‚Ä¶\nand if not, I‚Äôm here to make up the difference.\n\nYou are not just another year in my life,\nyou‚Äôre the reason my days feel warmer\nand my future feels brighter.\n\nIf love is a wish,\nyou‚Äôre the one I‚Äôd make\nevery single time.\n\nToday is about you,\nbut my heart chooses you\nevery day.`;
        }

        function burstFinal(e) {
            createExplosion(window.innerWidth/2, window.innerHeight/2, 250);
        }

        drawAurora();
    </script>
</body>
</html>
