<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Sai | Forever</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #e2b04a; --bg: #010204; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; overflow: hidden; touch-action: none; }
        
        canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }

        .overlay { position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; text-align: center; pointer-events: none; }
        .interactive { pointer-events: auto; }

        /* THE SINGULARITY CORE */
        .singularity { 
            width: 90px; height: 90px; border-radius: 50%; background: white; 
            box-shadow: 0 0 40px 10px white, 0 0 100px 20px var(--gold);
            cursor: pointer; animation: pulse-aura 2s infinite ease-in-out; 
        }
        @keyframes pulse-aura { 0%, 100% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.1); opacity: 1; } }

        /* LOVE ORBS */
        .orb { 
            position: absolute; width: 65px; height: 65px; 
            background: radial-gradient(circle at 30% 30%, #fff, var(--gold)); 
            border-radius: 50%; box-shadow: 0 0 30px var(--gold); 
            cursor: pointer; z-index: 50; pointer-events: auto;
            animation: orbFloat 3s infinite ease-in-out;
        }
        @keyframes orbFloat { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(5px, -15px); } }

        /* PICKUP LINE POPUPS (Ensured to fit screen) */
        .pickup-container {
            position: absolute; width: 80%; left: 10%; pointer-events: none;
            display: flex; justify-content: center; align-items: center; z-index: 100;
        }
        .pickup-text { 
            font-family: 'Montserrat', sans-serif; color: white; 
            font-size: 1.1rem; text-align: center; font-weight: 600;
            text-shadow: 0 0 20px var(--gold), 0 0 10px black;
            animation: shatterRise 2s forwards ease-out;
            background: rgba(0,0,0,0.4); padding: 10px 20px; border-radius: 15px;
            border: 1px solid var(--gold);
        }
        @keyframes shatterRise { 
            0% { opacity: 0; transform: scale(0.8) translateY(20px); }
            20% { opacity: 1; transform: scale(1) translateY(0); }
            100% { opacity: 0; transform: translateY(-100px); } 
        }

        /* TIMER BOX */
        .glass-timer { 
            position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(226, 176, 74, 0.3); border-radius: 50px; 
            padding: 8px 20px; z-index: 200;
        }
        .clock-val { font-size: 1.8rem; font-weight: 200; color: white; }

        /* FINAL SCREEN MESSAGE */
        #surprise-view { display: none; opacity: 0; transition: opacity 1.5s; overflow-y: auto; }
        .final-card { 
            border: 1px solid var(--gold); padding: 30px 20px; border-radius: 30px; 
            background: rgba(0,0,0,0.7); backdrop-filter: blur(25px);
            width: 85%; max-width: 400px; margin: auto;
        }
        .reveal-text { font-size: 0.95rem; line-height: 1.7; font-weight: 300; margin-bottom: 20px; white-space: pre-line; }
        #glass-emoji { font-size: 4.5rem; cursor: pointer; filter: drop-shadow(0 0 15px var(--gold)); }
    </style>
</head>
<body>

    <canvas id="canvas"></canvas>
    <audio id="music" loop><source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg"></audio>

    <div class="overlay interactive" id="setup-view">
        <div onclick="ignite()">
            <div class="singularity"></div>
            <p style="letter-spacing: 6px; margin-top: 40px; font-size: 0.7rem; color: var(--gold);">TAP TO WAKE THE UNIVERSE</p>
        </div>
    </div>

    <div id="timer-view" style="display:none;">
        <div class="glass-timer"><div class="clock-val" id="clock">01:00</div></div>
    </div>

    <div class="overlay" id="surprise-view">
        <div class="interactive final-card">
            <h1 style="font-size: 2.8rem; font-family: 'Cinzel'; margin: 0; color: var(--gold);">SAI</h1>
            <div class="reveal-text">
Happy Birthday ‚ù§Ô∏è
I hope this year gives you everything you‚Äôve been wishing for‚Ä¶ and if not, I‚Äôm here to make up the difference.

You are not just another year in my life, you‚Äôre the reason my days feel warmer and my future feels brighter.

If love is a wish, you‚Äôre the one I‚Äôd make every single time.

Today is about you, but my heart chooses you every day.
            </div>
            <div onclick="clinkGlass()">
                <div id="glass-emoji">ü•Ç</div>
                <p style="font-size: 0.6rem; color: var(--gold); letter-spacing: 4px; margin-top: 10px;">TOAST TO US</p>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let speedMult = 0.6;
        
        const pickups = [
            "Are you a Wi-Fi signal? Because I‚Äôm feeling a strong connection.",
            "I was going to wait three days to text‚Ä¶ but I‚Äôm bad at waiting.",
            "Do you believe in fate, or should I accidentally bump into you again?",
            "Are you made of copper and tellurium? Because you‚Äôre Cu-Te.",
            "I‚Äôm not good at math, but you + me feels right.",
            "Is your name Google? Because you‚Äôve got everything I‚Äôm searching for.",
            "Are you this attractive on purpose, or is it just effortless?",
            "I was fine before I saw you‚Ä¶ now I‚Äôm distracted.",
            "Quick question‚Äîhow are you single?",
            "I don‚Äôt usually do this, but I‚Äôd regret it if I didn‚Äôt talk to you.",
            "I saw you and thought, ‚ÄòI need to know his story.‚Äô",
            "You look like trouble‚Ä¶ the kind I‚Äôm willing to risk.",
            "Are you a parking ticket? Because you‚Äôve got ‚Äòfine‚Äô written all over you.",
            "Do you have a Band-Aid? I just scraped my knee falling for you."
        ];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.onresize = resize; resize();

        class Particle {
            constructor(x, y, speed, color) {
                this.x = x || Math.random() * canvas.width;
                this.y = y || Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * speed;
                this.vy = (Math.random() - 0.5) * speed;
                this.radius = Math.random() * 1.5;
                this.color = color || `rgba(226, 176, 74, ${Math.random() * 0.4 + 0.2})`;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2); ctx.fill();
            }
            update() {
                this.x += this.vx * speedMult; this.y += this.vy * speedMult;
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
        }

        for (let i = 0; i < 150; i++) particles.push(new Particle(null, null, 1));

        function animate() {
            ctx.fillStyle = 'rgba(1, 2, 4, 0.25)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }
        animate();

        function ignite() {
            speedMult = 25; setTimeout(() => speedMult = 0.8, 800);
            const m = document.getElementById('music');
            m.play().then(() => { m.pause(); m.currentTime = 0; });
            document.getElementById('setup-view').style.display = 'none';
            document.getElementById('timer-view').style.display = 'block';
            startTimer();
            spawnOrb();
        }

        function spawnOrb() {
            if(document.getElementById('timer-view').style.display === 'none') return;
            const orb = document.createElement('div');
            orb.className = 'orb';
            orb.style.left = Math.random() * (window.innerWidth - 80) + 'px';
            orb.style.top = (Math.random() * (window.innerHeight - 200) + 100) + 'px';
            
            orb.onclick = (e) => {
                e.stopPropagation();
                shatterEffect(e.clientX, e.clientY);
                showText(e.clientY); // Always centered horizontally
                orb.remove();
            };
            document.getElementById('timer-view').appendChild(orb);
            setTimeout(spawnOrb, 4000);
        }

        function shatterEffect(x, y) {
            speedMult = 12; for(let i=0; i<20; i++) particles.push(new Particle(x, y, 18, 'white'));
            setTimeout(() => speedMult = 0.8, 400);
            confetti({ particleCount: 30, spread: 360, origin: { x: x/window.innerWidth, y: y/window.innerHeight }, colors: ['#e2b04a', 'white'] });
        }

        function showText(y) {
            const container = document.createElement('div');
            container.className = 'pickup-container';
            container.style.top = (y - 50) + 'px';
            
            const p = document.createElement('div');
            p.className = 'pickup-text';
            p.innerText = pickups[Math.floor(Math.random()*pickups.length)];
            
            container.appendChild(p);
            document.body.appendChild(container);
            setTimeout(() => container.remove(), 2000);
        }

        function startTimer() {
            let time = 60;
            const interval = setInterval(() => {
                time--;
                document.getElementById('clock').innerText = `00:${time.toString().padStart(2, '0')}`;
                if (time <= 0) { clearInterval(interval); reveal(); }
            }, 1000);
        }

        function reveal() {
            document.getElementById('timer-view').style.display = 'none';
            const sv = document.getElementById('surprise-view');
            sv.style.display = 'flex'; setTimeout(() => sv.style.opacity = '1', 50);
            document.getElementById('music').play();
            speedMult = 45;
            for(let i=0; i<300; i++) particles.push(new Particle(canvas.width/2, canvas.height/2, 25));
            confetti({ particleCount: 200, spread: 90, origin: { y: 0.7 }, colors: ['#e2b04a', 'white'] });
        }

        function clinkGlass() {
            confetti({ particleCount: 150, spread: 360, origin: { y: 0.7 }, colors: ['#e2b04a', 'white'], shapes: ['star'] });
        }
    </script>
</body>
</html>
