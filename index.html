<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A Special Birthday Wish</title>
    <style>
        body { margin: 0; height: 100vh; background: #1a0f0a; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: 'Georgia', serif; }
        canvas { position: fixed; inset: 0; pointer-events: none; z-index: 100; }
        
        /* The Gourmet Cake */
        .cake-container { perspective: 1000px; z-index: 10; cursor: pointer; }
        .cake {
            width: 250px; height: 180px; transform-style: preserve-3d;
            transform: rotateX(20deg) rotateY(-10deg); transition: 1s;
        }
        
        /* Chocolate Ganache Layers */
        .layer {
            position: absolute; width: 100%; background: #2d1b0d; 
            border-radius: 10px; border: 1px solid #3d2616;
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.5), 0 10px 30px rgba(0,0,0,0.8);
        }
        .base { height: 100px; bottom: 0; width: 250px; }
        .mid { height: 80px; bottom: 60px; width: 200px; left: 25px; }
        .top-tier { height: 60px; bottom: 110px; width: 150px; left: 50px; }

        /* Piped Icing Effect */
        .icing {
            position: absolute; width: 100%; height: 10px; background: #fdf5e6;
            border-radius: 50%; top: -5px; opacity: 0.8; filter: blur(1px);
        }

        /* Warm Candles */
        .candle { width: 10px; height: 40px; background: #fff5e6; position: absolute; top: -40px; border-radius: 2px; }
        .flame {
            position: absolute; top: -18px; left: -2px; width: 14px; height: 22px;
            background: radial-gradient(#fff, #ffa500, #ff4500);
            border-radius: 50% 50% 20% 20%; box-shadow: 0 0 15px #ffa500;
            animation: flicker 0.1s infinite alternate;
        }
        .blown .flame { display: none; }
        @keyframes flicker { to { transform: scale(1.1) translateY(-2px); opacity: 0.8; } }

        /* Final Celebration UI */
        #msg {
            position: fixed; top: 25%; color: #fdf5e6; text-align: center; font-size: 2.8rem;
            text-shadow: 0 0 20px rgba(255,215,0,0.5); transform: scale(0); transition: 0.8s; z-index: 150;
        }
        #wish-ui {
            position: fixed; bottom: 15%; left: 50%; transform: translateX(-50%) scale(0);
            z-index: 200; transition: 0.5s; text-align: center;
        }
        input {
            background: rgba(255, 255, 255, 0.05); border: 1px solid #ffd700; color: #ffd700;
            padding: 12px 25px; font-size: 1.1rem; border-radius: 30px; outline: none; width: 280px;
        }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>
<div id="msg">HAPPY BIRTHDAY BABY! <br> ðŸ’‹ðŸ¦‹âœ¨</div>

<div id="wish-ui">
    <input type="text" id="wish-input" placeholder="Type a wish for the butterflies..." onkeydown="sendWish(event)">
</div>

<div class="cake-container">
    <div class="cake" id="main-cake">
        <div class="layer base"><div class="icing"></div></div>
        <div class="layer mid"><div class="icing"></div></div>
        <div class="layer top-tier">
            <div class="icing"></div>
            <div class="candle" style="left: 20%;" onclick="extinguish(this)"><div class="flame"></div></div>
            <div class="candle" style="left: 45%;" onclick="extinguish(this)"><div class="flame"></div></div>
            <div class="candle" style="left: 70%;" onclick="extinguish(this)"><div class="flame"></div></div>
        </div>
    </div>
</div>

<script>
    let flamesOut = 0;
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let butterflies = [];

    function extinguish(el) {
        if(!el.classList.contains('blown')) {
            el.classList.add('blown');
            flamesOut++;
            if(flamesOut === 3) startMagic();
        }
    }

    function startMagic() {
        document.getElementById('msg').style.transform = "scale(1)";
        document.getElementById('wish-ui').style.transform = "translateX(-50%) scale(1)";
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        for(let i=0; i<45; i++) {
            butterflies.push({
                x: window.innerWidth/2, y: window.innerHeight/2,
                vx: (Math.random()-0.5)*8, vy: (Math.random()-0.5)*8,
                size: Math.random()*12 + 10, phase: Math.random()*Math.PI*2,
                color: '#ffd700'
            });
        }
        draw();
    }

    function sendWish(e) {
        if(e.key === 'Enter') {
            document.getElementById('wish-ui').style.opacity = "0";
            butterflies.forEach(b => { b.vy = -Math.random()*12 - 5; b.vx = (Math.random()-0.5)*4; });
        }
    }

    function draw() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        butterflies.forEach(b => {
            b.x += b.vx; b.y += b.vy; b.phase += 0.15;
            let flap = Math.abs(Math.sin(b.phase)) * b.size;
            ctx.shadowBlur = 15; ctx.shadowColor = b.color;
            ctx.fillStyle = b.color;
            ctx.beginPath();
            ctx.ellipse(b.x - flap/2, b.y, flap/2, b.size, 0, 0, Math.PI*2);
            ctx.ellipse(b.x + flap/2, b.y, flap/2, b.size, 0, 0, Math.PI*2);
            ctx.fill();
        });
        requestAnimationFrame(draw);
    }
</script>
</body>
</html>
