<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Birthday Mission</title>
    <style>
        :root {
            --aurora-green: rgba(16, 185, 129, 0.3);
            --aurora-blue: rgba(0, 229, 255, 0.3);
        }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #010409;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica;
            color: white; -webkit-tap-highlight-color: transparent;
        }

        /* IPHONE OPTIMIZED BACKGROUND */
        #sky {
            position: fixed; inset: 0; z-index: -1;
            background: radial-gradient(circle at bottom, #041124 0%, #010409 100%);
        }

        /* CSS Stars (Avoids Canvas Crashes) */
        .star {
            position: absolute; background: white; border-radius: 50%;
            opacity: 0.5; animation: twinkle var(--d) infinite ease-in-out;
        }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        /* CSS Aurora Waves (High Performance) */
        .aurora {
            position: absolute; width: 200%; height: 60%;
            top: 20%; left: -50%; filter: blur(60px);
            background: linear-gradient(90deg, transparent, var(--aurora-green), var(--aurora-blue), var(--aurora-green), transparent);
            opacity: 0.4; animation: wave 12s infinite linear;
            pointer-events: none;
        }
        .aurora-2 { top: 25%; animation: wave 18s infinite linear reverse; opacity: 0.3; }

        @keyframes wave {
            0% { transform: translateX(-20%) skewX(-10deg); }
            100% { transform: translateX(20%) skewX(10deg); }
        }

        #wrapper {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; height: 100vh;
        }

        /* HUD Timer */
        #timer-container {
            position: fixed; top: 40px; right: 20px; text-align: right; z-index: 100;
        }
        #timer { font-size: 3rem; font-weight: 800; color: #00e5ff; margin: 0; }

        /* Floating Vibe Cards */
        .vibe-card {
            position: fixed; cursor: pointer; padding: 18px 25px;
            background: rgba(255, 255, 255, 0.08); 
            -webkit-backdrop-filter: blur(15px); backdrop-filter: blur(15px);
            border-radius: 15px; border: 1px solid rgba(255,255,255,0.2);
            font-size: 1.1rem; text-align: center; color: white;
            z-index: 50; width: 70%; max-width: 250px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: floatUp 12s linear forwards;
        }

        @keyframes floatUp {
            0% { transform: translate(var(--x), 105vh); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(var(--x), -20vh); opacity: 0; }
        }

        /* Explosion */
        .p {
            position: absolute; width: 4px; height: 4px; border-radius: 50%;
            pointer-events: none; z-index: 100; animation: pMove 0.8s ease-out forwards;
        }
        @keyframes pMove { to { transform: translate(var(--tx), var(--ty)); opacity: 0; } }

        #overlay {
            position: fixed; inset: 0; background: #010409;
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .btn {
            background: #10b981; color: white; border: none; padding: 20px 40px;
            border-radius: 50px; font-weight: bold; font-size: 1.1rem; letter-spacing: 2px;
        }

        #final-screen {
            display: none; width: 85%; padding: 30px;
            background: rgba(0,0,0,0.8); border-radius: 20px;
            text-align: center; z-index: 500; border: 1px solid #fbbf24;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <button class="btn" onclick="init()">START MISSION</button>
    </div>

    <div id="sky">
        <div class="aurora"></div>
        <div class="aurora aurora-2"></div>
    </div>

    <div id="wrapper">
        <div id="timer-container">
            <div id="timer">02:00</div>
        </div>

        <div id="final-screen">
            <h2 style="color:#fbbf24; margin-bottom:10px;">Happy Birthday ‚ù§Ô∏è</h2>
            <p id="msg" style="line-height: 1.6; color: #cbd5e1; font-size: 1rem;"></p>
            <div style="font-size: 4rem;" onclick="burst(event)">ü•Ç</div>
        </div>
    </div>

    <audio id="msc" loop><source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>

    <script>
        const lines = [
            "Are you a Wi-Fi signal? Because I‚Äôm feeling a strong connection.",
            "I was going to wait three days to text‚Ä¶ but I‚Äôm bad at waiting.",
            "Do you believe in fate, or should I bump into you again?",
            "Are you made of copper and tellurium? Because you‚Äôre Cu-Te.",
            "I‚Äôm not good at math, but you + me feels right.",
            "Is your name Google? You‚Äôve got everything I‚Äôm searching for.",
            "Are you this attractive on purpose, or is it effortless?",
            "I was fine before I saw you‚Ä¶ now I‚Äôm distracted.",
            "Quick question‚Äîhow are you single?",
            "I saw you and thought, ‚ÄòI need to know your story.‚Äô",
            "You look like trouble‚Ä¶ the kind I‚Äôm willing to risk.",
            "Are you a parking ticket? You‚Äôve got ‚Äòfine‚Äô written all over you.",
            "Do you have a Band-Aid? I just scraped my knee falling for you."
        ];

        let timeLeft = 120;
        let idx = 0;

        // Create Stars
        for(let i=0; i<60; i++) {
            let s = document.createElement('div');
            s.className = 'star';
            s.style.width = s.style.height = Math.random()*3+'px';
            s.style.left = Math.random()*100+'%';
            s.style.top = Math.random()*100+'%';
            s.style.setProperty('--d', (Math.random()*3+2)+'s');
            document.getElementById('sky').appendChild(s);
        }

        function init() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('msc').play();
            
            spawn();
            setInterval(() => { if(timeLeft > 3) spawn(); }, 4000);

            const count = setInterval(() => {
                timeLeft--;
                let m = Math.floor(timeLeft/60), s = timeLeft % 60;
                document.getElementById('timer').textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                if(timeLeft <= 0) { clearInterval(count); end(); }
            }, 1000);
        }

        function spawn() {
            const c = document.createElement('div');
            c.className = 'vibe-card';
            c.textContent = lines[idx];
            c.style.setProperty('--x', (Math.random()*(window.innerWidth-200))+'px');
            
            c.onclick = (e) => {
                for(let i=0; i<40; i++) {
                    const p = document.createElement('div');
                    p.className = 'p';
                    p.style.left = e.clientX+'px'; p.style.top = e.clientY+'px';
                    p.style.background = ['#00e5ff','#10b981','#fbbf24','#fff'][i%4];
                    p.style.setProperty('--tx', (Math.random()-0.5)*300+'px');
                    p.style.setProperty('--ty', (Math.random()-0.5)*300+'px');
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 800);
                }
                c.remove();
            };
            document.body.appendChild(c);
            idx = (idx + 1) % lines.length;
        }

        function end() {
            document.getElementById('timer-container').style.display = 'none';
            document.querySelectorAll('.vibe-card').forEach(v => v.remove());
            document.getElementById('final-screen').style.display = 'block';
            document.getElementById('msg').innerText = `I hope this year gives you everything you‚Äôve been wishing for‚Ä¶\n\nYou are not just another year in my life, you‚Äôre the reason my days feel warmer.\n\nIf love is a wish, you‚Äôre the one I‚Äôd make every single time.\n\nToday is about you, but my heart chooses you every day.`;
        }

        function burst(e) {
            // Re-use explosion logic for the toast icon
        }
    </script>
</body>
</html>
